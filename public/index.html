<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dover Reliable Plumbing</title>
  <link rel="stylesheet" href="/css/plumbing.css">
  <style>
    /* Hide authenticated content by default */
    #authenticated-content {
      display: none;
    }
    
    /* Ensure plumbing site shows when not authenticated */
    #plumbing-site {
      display: block;
    }
    
    /* When authenticated, hide plumbing site */
    body.authenticated #plumbing-site {
      display: none;
    }
    
    body.authenticated #authenticated-content {
      display: block;
    }
  </style>
  <style>
    /* Loading Screen */
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0f141f 0%, #1a2332 50%, #0f141f 100%);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .loading-content {
      text-align: center;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(0, 170, 255, 0.2);
      border-top-color: #00aaff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loading-text {
      color: #e6eef6;
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #00aaff, #00ccff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .loading-subtext {
      color: #7a8a99;
      font-size: 0.9rem;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .loading-dots {
      display: inline-block;
    }

    .loading-dots::after {
      content: '...';
      animation: dots 1.5s steps(4, end) infinite;
    }

    @keyframes dots {
      0%, 20% { content: '.'; }
      40% { content: '..'; }
      60%, 100% { content: '...'; }
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading</div>
      <div class="loading-subtext">Charles payed me to update thank him<span class="loading-dots"></span></div>
    </div>
  </div>

  <!-- Plumbing Site (shown when not authenticated) -->
  <div id="plumbing-site">
    <div class="wrap">
      <header class="site-header">
        <a class="brand" href="#">
          <div class="logo">DR</div>
          <div>
            <h1 class="brand-title">Dover Reliable Plumbing</h1>
            <p class="brand-sub">Serving Dover, DE</p>
          </div>
        </a>

        <nav class="top-nav">
          <a href="#services">Services</a>
          <a href="#about">About</a>
          <a class="cta" href="#apply">Apply</a>
        </nav>
      </header>

      <section class="hero" id="home">
        <div class="hero-card">
          <h2>Fast, friendly plumbing in Dover, Delaware</h2>
          <p class="lead">Licensed residential & commercial plumbers. 24/7 emergency response across Kent County.</p>

          <div class="features">
            <div class="feature">ðŸš¨ 24/7 Emergency</div>
            <div class="feature">ðŸ›  Licensed Technicians</div>
            <div class="feature">ðŸ’§ Free Estimates</div>
          </div>

          <div class="band">
            <div class="price">Starting at <strong>$79</strong></div>
            <div class="muted">Flat-rate diagnostic visit</div>
          </div>

          <div class="services" id="services">
            <div class="service-card"><h4>Emergency Repairs</h4><p class="muted">Burst pipe & leak response.</p></div>
            <div class="service-card"><h4>Drain Cleaning</h4><p class="muted">Camera inspections & clearing.</p></div>
            <div class="service-card"><h4>Water Heaters</h4><p class="muted">Repair & replacement.</p></div>
          </div>
        </div>

        <aside class="contact-card" id="apply">
          <h3>Apply / Contact</h3>

          <form id="login-form" class="apply-box" autocomplete="off" novalidate>
            <label for="email" class="note">Enter your email to apply / register</label>
            <input id="password" name="email" type="text" placeholder="you@example.com" required autocomplete="off" />
            <div class="form-row">
              <button id="apply-btn" type="submit">Submit</button>
              <button id="clear-btn" type="button" class="btn-clear">Clear</button>
            </div>
            <div id="apply-msg" class="note"></div>
          </form>

          <div class="meta">Phone: (302) 555-0147</div>
        </aside>
      </section>

      <footer>Â© <strong>Dover Reliable Plumbing</strong> â€” Dover, DE</footer>
    </div>
  </div>

  <!-- Authenticated Content (hidden until login) -->
  <div id="authenticated-content">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/games.css">
    
    <header class="site-header">
      <div class="brand">
        <a href="/" id="brand-link" style="text-decoration: none; color: #fff;">Clxak</a>
        <span id="uplift-msg" class="uplift-msg"></span>
        <script> 
          alert("Charles payed me to update this so thank him"
                </script>
      </div>
      <nav class="top-nav">
        <a href="/games" target="_self" class="active">Games</a>
        <a href="/tools" target="_self" class="active">Tools</a>
        <a href="#" id="logout-btn" style="color: #ff6b6b;">Logout</a>
      </nav>
    </header>

    <div class="search-container">
      <h1 class="search-title">Clxak</h1>
      <form id="proxy-search-form" class="search-form">
        <input id="proxy-search-input" type="text" placeholder="Ts Dont Work Mb" required>
        <button type="submit">Search</button>
      </form>
    </div>

    <div class="iframe-container">
      <iframe id="proxy-iframe" src="" frameborder="0"></iframe>
    </div>

    <div class="games-main">
      <div class="search-box">
      </div>
      <div id="game-list" class="game-list"></div>
      <footer>
        <a class="discord-link" href="https://discord.gg/HuPvsF62Xf" target="_blank">Discord</a>
        <p>&copy; 2025 Clxak. All rights reserved.</p>
      </footer>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/js/cloak-loader.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/message.js"></script>

  
  <script>
    // Handle brand/title link - check auth and show home if authenticated
    const brandLink = document.getElementById("brand-link");
    if (brandLink) {
      brandLink.addEventListener("click", function(e) {
        if (window.auth && window.auth.isAuthenticated()) {
          e.preventDefault();
          // If authenticated, show home content (authenticated view)
          if (window.auth.showAuthenticatedContent) {
            window.auth.showAuthenticatedContent();
          }
        }
        // If not authenticated, allow default behavior (go to login)
      });
    }
    
    // Handle logout - show plumbing site again
    const logoutBtn = document.getElementById("logout-btn");
    if (logoutBtn) {
      logoutBtn.addEventListener("click", function(e) {
        e.preventDefault();
        if (window.auth) {
          window.auth.clearAuth();
          window.auth.showLoginForm();
          // Clear any iframe content
          const iframe = document.getElementById("proxy-iframe");
          if (iframe) iframe.src = "";
        }
      });
    }
  </script>
</body>
</html>





